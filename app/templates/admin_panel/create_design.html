{% extends "admin_panel/base.html" %}

{% block sub_content %}
<div class="add-record-block col-lg-12">
    <h4>Add Design</h4>
    <form action="" method="post" class="form-horizontal" role="form" enctype="multipart/form-data">
        {{ form.hidden_tag() }}
        <div class="form-group">
            {{ form.name.label(class="col-lg-6") }}
            <div class="col-lg-5">{{ form.name(size=32, class="form-control") }}</div>
            {% for error in form.name.errors %}
            <span class="error">{{ error }}</span>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.file.label(class="col-lg-6") }}
            <div class="row">
                <div class="col-lg-2">
                    <a id="a_preview" href="#" class="thumbnail col-lg-2 portfolio-popup">
                        <img id="preview" class="img-thumbnail" src="">
                    </a>
                </div>
                <div class="col-lg-5">{{ form.file(class="form-control") }}</div>
                {% for error in form.file.errors %}
                <span class="error">{{ error }}</span>
                {% endfor %}
            </div>
        </div>
        <div class="form-group">
            {{ form.categories.label(class="col-lg-6") }}
            <div class="col-lg-5">{{ form.categories(class="form-control") }}</div>
            {% for error in form.categories.errors %}
            <span class="error">{{ error }}</span>
            {% endfor %}
        </div>
        <div class="submit-panel">
            {{ form.submit(class="btn btn-success") }}
            <a class="btn btn-danger" href="{{ url_for('admin.list_designs') }}">Cancel</a>
        </div>
    </form>
</div>
<script>
function readURL(input) {

  if (input.files && input.files[0]) {
    var reader = new FileReader();

    reader.onload = function(e) {
      $('#preview').attr('src', e.target.result);
      $('#a_preview').attr('href', e.target.result);
    }

    reader.readAsDataURL(input.files[0]);
  }
}

$("#file").change(function() {
  readURL(this);
});
</script>
{% endblock %}